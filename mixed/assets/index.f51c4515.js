import{a as m}from"./index.2cf0d985.js";import{a3 as s,a4 as D}from"./index.55cf1f6a.js";import{c as r}from"./config.34b8290d.js";const p=2e4,f=401,g=402,O=403,d="ECONNABORTED",B="Network Error",F="application/json",E=m.create({baseURL:{}.VUE_APP_BASE_URL,timeout:25e3,headers:{"Content-Type":F}});E.interceptors.request.use(e=>e,e=>Promise.reject(e));E.interceptors.response.use(e=>e,e=>Promise.reject(e));var T=(e,i="\u8FDE\u63A5\u9519\u8BEF")=>{const{data:n={},status:o}=e||{};switch(o){case f:s({message:n.message||"\u4F1A\u8BDD\u5931\u6548\uFF0C\u8BF7\u91CD\u65B0\u767B\u5F55",onClose:()=>{}});break;case g:s(n.message);break;case O:s(n.message||"403\u6743\u9650\u9519\u8BEF");break;default:s(`${n.message||i+(o||"")}`)}};const c=function(e){const i=typeof e=="string"?{url:e}:e,{catchs:n=!0,toast:o=!0,...l}=i;return new Promise((R,a)=>{E(l).then(async t=>{if(!(t.headers["content-type"]||"").toLowerCase().includes(F))return R(t);let u=t.data||{};return!D(u)&&t.config.responseType&&(u=await new Response(u).json()),u.code!==p&&u.code!==200&&(o&&s(u.message||u.msg||"\u6570\u636E\u8FD4\u56DE\u5F02\u5E38"),n)?a(u):R(u)}).catch(t=>m.isCancel(t)||!o?a(t):t.code===d?(s("\u8BF7\u6C42\u8D85\u65F6\uFF0C\u8BF7\u7A0D\u5019\u518D\u8BD5"),a(t)):t.message===B?(s("\u7F51\u7EDC\u5F02\u5E38\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),a(t)):(T(t.response,""),a(t)))})};var N={login:e=>c({method:"post",url:r.login.url,data:e}),check:()=>c({method:"get",url:r.login.checkUrl}),getData:()=>c({method:"get",url:r.onload.url}),postData:e=>c({method:"post",url:r.lottery.url,data:e})};export{N as a};
